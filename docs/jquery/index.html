<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="keywords" content="JavaScript,jQuery" />
    <meta
      name="description"
      content="[官网](https://jquery.com/)请求通用插件基本写法与基本使用组合使用请求"
    />
    <title>jQuery</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
      integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/default.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
    <script>
      hljs.initHighlightingOnLoad()
    </script>
    <style>
      body {
        background-color: #f1f3f5;
        color: #345;
        font-size: 14px;
        font-family: -apple-system, BlinkMacSystemFont, segoe ui, roboto, oxygen,
          ubuntu, cantarell, fira sans, droid sans, helvetica neue, sans-serif;
      }

      .hljs {
        background-color: #ffffff;
      }

      .container {
        width: 60vw;
        margin: 0 auto;
      }
      pre {
        max-width: 60vw;
      }

      header {
        height: 10vh;
        line-height: 10vh;
      }

      header a {
        text-decoration: none;
        padding: 0.3vw 0.5vw;
        border: 1px #89a solid;
        border-radius: 0.2vw;
        color: #89a;
      }

      header a:hover {
        background-color: #ffffff;
        border-color: #345;
        color: #345;
      }

      h1 {
        font-size: 1.5em;
      }

      h3 {
        color: #745fb5;
        white-space: nowrap;
      }

      h3::after {
        margin-left: 24px;
        content: '';
        display: inline-block;
        vertical-align: middle;
        width: 100%;
        height: 1px;
        background: linear-gradient(
          to right,
          rgba(116, 95, 181, 0.2),
          transparent 80%
        );
      }

      .box {
        display: flex;
        flex-wrap: wrap;
        gap: 1vh;
      }

      .item {
        flex: 1;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <header>
        <a href="javascript:history.back()">Go Back</a>
      </header>

      <h1>jQuery</h1>
      <p><a href="https://jquery.com/">官网</a></p>
      <h1 id="ajax-请求">ajax 请求</h1>
      <div class="box">
        <div class="item">
          <h3 id="通用">通用</h3>
          <p>see <a href="https://learn.jquery.com/ajax/">doc</a></p>
          <pre><code class="hljs language-js">$.<span class="hljs-title function_">ajax</span>({
  <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/xxx&#x27;</span>,
  <span class="hljs-attr">data</span>: { ...data },
  <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,
  <span class="hljs-attr">contentType</span>: <span class="hljs-string">&#x27;application/x-www-form-urlencoded&#x27;</span>,
  <span class="hljs-attr">cache</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">1000</span> * <span class="hljs-number">1</span>,
  <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) {},
  <span class="hljs-attr">error</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) {},
})
</code></pre>
        </div>
      </div>
      <h1 id="插件">插件</h1>
      <div class="box">
        <div class="item">
          <h3 id="基本写法">基本写法</h3>
          <p>
            see
            <a href="https://learn.jquery.com/plugins/basic-plugin-creation/"
              >doc</a
            >
          </p>
          <pre><code class="hljs language-js">;(<span class="hljs-keyword">function</span> (<span class="hljs-params">$</span>) {
  $.fn.<span class="hljs-property">pluginname</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">options</span>) {
    <span class="hljs-keyword">var</span> opts = $.<span class="hljs-title function_">extend</span>({}, $.fn.<span class="hljs-property">pluginname</span>.<span class="hljs-property">defaults</span>, options)
    <span class="hljs-comment">// do something</span>
  }
  $.fn.<span class="hljs-property">pluginname</span>.<span class="hljs-property">defaults</span> = {}
})(jQuery)
</code></pre>
        </div>
      </div>
      <h1 id="when-与-deferred">When 与 Deferred</h1>
      <div class="box">
        <div class="item">
          <h3 id="基本使用">基本使用</h3>
          <pre><code class="hljs language-js">$.<span class="hljs-title function_">when</span>($.<span class="hljs-title function_">ajax</span>(<span class="hljs-string">&#x27;test.aspx&#x27;</span>)).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">data, textStatus, jqXHR</span>) {
  <span class="hljs-title function_">alert</span>(jqXHR.<span class="hljs-property">status</span>) <span class="hljs-comment">// Alerts 200</span>
})
</code></pre>
        </div>
        <div class="item">
          <h3 id="组合使用">组合使用</h3>
          <pre><code class="hljs language-js"><span class="hljs-keyword">var</span> d1 = $.<span class="hljs-title class_">Deferred</span>()
<span class="hljs-keyword">var</span> d2 = $.<span class="hljs-title class_">Deferred</span>()

$.<span class="hljs-title function_">when</span>(d1, d2).<span class="hljs-title function_">done</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">v1, v2</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(v1) <span class="hljs-comment">// &quot;Fish&quot;</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(v2) <span class="hljs-comment">// &quot;Pizza&quot;</span>
})

d1.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;Fish&#x27;</span>)
d2.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;Pizza&#x27;</span>)
</code></pre>
        </div>
        <div class="item">
          <h3 id="请求">请求</h3>
          <pre><code class="hljs language-js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getData</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">var</span> deferred = $.<span class="hljs-title class_">Deferred</span>()

  $.<span class="hljs-title function_">ajax</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;http://google.com&#x27;</span>,
    <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) {
      deferred.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;yay&#x27;</span>)
    },
    <span class="hljs-attr">error</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) {
      deferred.<span class="hljs-title function_">reject</span>(<span class="hljs-string">&#x27;boo&#x27;</span>)
    },
  })

  <span class="hljs-keyword">return</span> deferred.<span class="hljs-title function_">promise</span>()
}

$.<span class="hljs-title function_">when</span>(<span class="hljs-title function_">getData</span>()).<span class="hljs-title function_">done</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) {
  <span class="hljs-title function_">alert</span>(value)
})

<span class="hljs-title function_">getData</span>().<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) {
  <span class="hljs-title function_">alert</span>(value)
})
</code></pre>
        </div>
      </div>
    </div>
  </body>
</html>
