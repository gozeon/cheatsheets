<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>nginx</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
      integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/default.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
    <script>
      hljs.initHighlightingOnLoad()
    </script>
    <style>
      body {
        background-color: #f1f3f5;
        color: #345;
        font-size: 14px;
        font-family: -apple-system, BlinkMacSystemFont, segoe ui, roboto, oxygen,
          ubuntu, cantarell, fira sans, droid sans, helvetica neue, sans-serif;
      }

      .hljs {
        background-color: #ffffff;
      }

      .container {
        width: 60vw;
        margin: 0 auto;
      }
      pre {
        max-width: 60vw;
      }

      header {
        height: 10vh;
        line-height: 10vh;
      }

      header a {
        text-decoration: none;
        padding: 0.3vw 0.5vw;
        border: 1px #89a solid;
        border-radius: 0.2vw;
        color: #89a;
      }

      header a:hover {
        background-color: #ffffff;
        border-color: #345;
        color: #345;
      }

      h1 {
        font-size: 1.5em;
      }

      h3 {
        color: #745fb5;
        white-space: nowrap;
      }

      h3::after {
        margin-left: 24px;
        content: '';
        display: inline-block;
        vertical-align: middle;
        width: 100%;
        height: 1px;
        background: linear-gradient(
          to right,
          rgba(116, 95, 181, 0.2),
          transparent 80%
        );
      }

      .box {
        display: flex;
        flex-wrap: wrap;
        gap: 1vh;
      }

      .item {
        flex: 1;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <header>
        <a href="javascript:history.back()">Go Back</a>
      </header>

      <h1>nginx</h1>
      <p><a href="https://www.nginx.com/">官网</a></p>
      <h1 id="常用配置">常用配置</h1>
      <div class="box">
        <div class="item">
          <h3 id="静态目录">静态目录</h3>
          <p>将目录作为静态文件服务器</p>
          <pre><code class="hljs language-nginx"><span class="hljs-section">server</span> {
    <span class="hljs-attribute">listen</span>       <span class="hljs-number">80</span> default_server;
    <span class="hljs-attribute">listen</span>       [::]:<span class="hljs-number">80</span> default_server;
    <span class="hljs-attribute">server_name</span>  _;
    <span class="hljs-comment"># root         /usr/share/nginx/html;</span>

    <span class="hljs-comment"># Load configuration files for the default server block.</span>
    <span class="hljs-attribute">include</span> /etc/nginx/default.d/<span class="hljs-regexp">*.conf</span>;

    <span class="hljs-section">location</span> / {
        <span class="hljs-attribute">root</span> /root;

        <span class="hljs-attribute">autoindex</span> <span class="hljs-literal">on</span>;
        <span class="hljs-attribute">autoindex_exact_size</span> <span class="hljs-literal">on</span>;
        <span class="hljs-attribute">autoindex_localtime</span> <span class="hljs-literal">on</span>;
    }

    <span class="hljs-attribute">error_page</span> <span class="hljs-number">404</span> /<span class="hljs-number">404</span>.html;
        <span class="hljs-section">location</span> = /40x.html {
    }

    <span class="hljs-attribute">error_page</span> <span class="hljs-number">500</span> <span class="hljs-number">502</span> <span class="hljs-number">503</span> <span class="hljs-number">504</span> /50x.html;
        <span class="hljs-section">location</span> = /50x.html {
    }

}
</code></pre>
        </div>
        <div class="item">
          <h3 id="基本转发">基本转发</h3>
          <p>转发前端资源和后端服务，前端资源为统一目录，毋需修改配置</p>
          <pre><code class="hljs language-nginx"><span class="hljs-section">server</span> {
    <span class="hljs-attribute">listen</span>       <span class="hljs-number">80</span>;
    <span class="hljs-attribute">listen</span>       [::]:<span class="hljs-number">80</span>;
    <span class="hljs-attribute">server_name</span>  _;
    <span class="hljs-comment">#root         /usr/share/nginx/html;</span>

    <span class="hljs-comment"># Load configuration files for the default server block.</span>
    <span class="hljs-attribute">include</span> /etc/nginx/default.d/<span class="hljs-regexp">*.conf</span>;

    <span class="hljs-section">location</span> <span class="hljs-regexp">~ ^/(static)/</span> {
           <span class="hljs-attribute">root</span> /home/homework/webroot;
        }
        <span class="hljs-section">location</span> <span class="hljs-regexp">~ \.html$</span> {
           <span class="hljs-attribute">root</span> /home/homework/webroot;
        }
        <span class="hljs-section">location</span> <span class="hljs-regexp">~* ^/+workflow/.*</span> {
           <span class="hljs-attribute">proxy_pass</span> http://127.0.0.1:8080;
        }

        <span class="hljs-attribute">error_page</span> <span class="hljs-number">404</span> /<span class="hljs-number">404</span>.html;
        <span class="hljs-section">location</span> = /<span class="hljs-number">404</span>.html {
        }

        <span class="hljs-attribute">error_page</span> <span class="hljs-number">500</span> <span class="hljs-number">502</span> <span class="hljs-number">503</span> <span class="hljs-number">504</span> /50x.html;
        <span class="hljs-section">location</span> = /50x.html {
        }
    }
}
</code></pre>
        </div>
      </div>
    </div>
  </body>
</html>
